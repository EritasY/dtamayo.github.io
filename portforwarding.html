<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Dan Tamayo</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/landing-page.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top topnav" role="navigation">
        <div class="container topnav">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand topnav"></a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="index.html">Home</a>
                    </li>
                    <li>
                        <a href="research.html">Research</a>
                    </li>
                    <li>
                        <a href="resources.html">Resources</a>
                    </li>
                    <li>
                        <a href="contact.html">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <!-- Header -->
    <div class="intro-header"></div>

    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="main-section-heading">Running a Jupyter notebook remotely using port forwarding</div>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="row topbot-buffer">
            <div class="col-lg-12">
                <p class="lead">
                    The ssh command to get this working is quite unwieldy and you will definitely want to simplify your life with an ssh config file. Start by following the <a href="sshconfig.html">Simplifying advanced ssh commands with an ssh config file</a> tutorial. After doing that, let's now add an entry at the bottom of that ssh config file:
                </p>
                <pre>
                    <code>
                        Host hr8799fw
                            User username
                            HostName hr8799.physics.hmc.edu
                            LocalForward 8888 localhost:8888
                            ProxyJump sphinx
                    </code>
                </pre>
                <p class="lead">
                    where again we shoudl replace 'username' with our own username on the workstation (HMC login). I put fw at the end (for forwarding, but you can call it whatever you want), and we added the LocalForward line, where we chose to use the port (8888) that jupyter notebook tries by default when it launches. Note that if you are running other notebooks on your laptop or on the workstation, then launching a new notebook will choose a higher port. For this command to work you would have to close any other open notebook processes so you get the default port. 
                </p>
                <p class="lead">
                    Now we need to run jupyter notebook on the workstation we want to use. A common problem though is that if we're trying to get this working remotely, we'll typically be getting that running through ssh, and the process running our notebook will terminate as soon as our ssh session ends. We can prevent that by using the screen command, and you will definitely want to read through that tutorial: <a href="screen.html">Keeping a terminal session running with the screen command</a>. Assuming you have jupyter notebook running on one of the workstations (say hr8799) following the screen tutorial or another method, all that's left to do is:
                </p> 
                <pre>
                    <code>
                        $ ssh -N -f hr8799fw
                    </code>
                </pre>
                <p class="lead">
                    If you now open any web browser on your own laptop, and type in the url localhost:8888, you should get the jupyter notebook running on the workstation. You may be prompted for a password by jupyter, which you can get from me directly.
                </p> 
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <p class="copyright text-muted small">Copyright &copy; Dan Tamayo 2022.</p> 
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

</body>
</html>
